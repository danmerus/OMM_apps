
import streamlit as st

st.set_page_config(
    page_title="–û—Ü–µ–Ω–∫–∞ —Ä–∏—Å–∫–∞ –ø—Ä–µ—ç–∫–ª–∞–º–ø—Å–∏–∏ (–•–ê–ì)",
    page_icon="ü©∫",
    layout="centered"
)

st.title("ü©∫ –û—Ü–µ–Ω–∫–∞ —Ä–∏—Å–∫–∞ –ø—Ä–µ—ç–∫–ª–∞–º–ø—Å–∏–∏ —É –ø–∞—Ü–∏–µ–Ω—Ç–æ–∫ —Å –•–ê–ì")
st.caption("–ù–∞ –æ—Å–Ω–æ–≤–∞–Ω–∏–∏ –∫–ª–∏–Ω–∏–∫–æ‚Äë–∞–Ω–∞–º–Ω–µ—Å—Ç–∏—á–µ—Å–∫–∏—Ö —Ñ–∞–∫—Ç–æ—Ä–æ–≤ —Ä–∏—Å–∫–∞ (—É—á–µ–±–Ω—ã–π –ø—Ä–∏–º–µ—Ä)")

with st.expander("‚ÑπÔ∏è –ú–æ–¥–µ–ª—å –∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ"):
    st.markdown(
        """
**–§–æ—Ä–º—É–ª–∞:**  
\\( D = 1.61 \\cdot X_1 + 1.05 \\cdot X_2 - 1.62 \\cdot X_3 - 0.11 \\cdot X_4 + 0.09 \\cdot X_5 + 3.13 \\cdot X_6 + 3.73 \\)

**–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:**
- **X1** ‚Äî –≥–∏–ø–æ–¥–∏–Ω–∞–º–∏—è (–¥–∞=1 / –Ω–µ—Ç=0)  
- **X2** ‚Äî —Ö—Ä–æ–Ω–∏—á–µ—Å–∫–∞—è –±–æ–ª–µ–∑–Ω—å –ø–æ—á–µ–∫ (–•–ë–ü) (–¥–∞=1 / –Ω–µ—Ç=0)  
- **X3** ‚Äî —Ö—Ä–æ–Ω–∏—á–µ—Å–∫–∞—è –ê–ì –≤ –ø—Ä–µ–¥—ã–¥—É—â—É—é –±–µ—Ä–µ–º–µ–Ω–Ω–æ—Å—Ç—å (–¥–∞=1 / –Ω–µ—Ç=0)  
- **X4** ‚Äî –°–ê–î –ø—Ä–∏ —è–≤–∫–µ –≤ –ñ–ö –≤ I —Ç—Ä–∏–º–µ—Å—Ç—Ä–µ (–º–º —Ä—Ç. —Å—Ç.)  
- **X5** ‚Äî –î–ê–î –ø—Ä–∏ —è–≤–∫–µ –≤ –ñ–ö –≤ I —Ç—Ä–∏–º–µ—Å—Ç—Ä–µ (–º–º —Ä—Ç. —Å—Ç.)  
- **X6** ‚Äî –î–ê–î > 100 –º–º —Ä—Ç. —Å—Ç. –≤ I —Ç—Ä–∏–º–µ—Å—Ç—Ä–µ (–¥–∞=1 / –Ω–µ—Ç=0)

**–ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è:**
- –ï—Å–ª–∏ \\(D < -1.36\\) ‚Äî —Ä–∏—Å–∫ **–Ω–∏–∑–∫–∏–π**  
- –ï—Å–ª–∏ \\(D \\ge -1.36\\) ‚Äî —Ä–∏—Å–∫ **–≤—ã—Å–æ–∫–∏–π**
        """
    )

st.subheader("–í–≤–æ–¥ –¥–∞–Ω–Ω—ã—Ö")

col1, col2 = st.columns(2)
with col1:
    X1 = st.checkbox("X1: –ì–∏–ø–æ–¥–∏–Ω–∞–º–∏—è", value=False)
    X2 = st.checkbox("X2: –•—Ä–æ–Ω–∏—á–µ—Å–∫–∞—è –±–æ–ª–µ–∑–Ω—å –ø–æ—á–µ–∫ (–•–ë–ü)", value=False)
    X3 = st.checkbox("X3: –•—Ä–æ–Ω–∏—á–µ—Å–∫–∞—è –ê–ì –≤ –ø—Ä–µ–¥—ã–¥—É—â—É—é –±–µ—Ä–µ–º–µ–Ω–Ω–æ—Å—Ç—å", value=False)

with col2:
    X4 = st.number_input("X4: –°–∏—Å—Ç–æ–ª–∏—á–µ—Å–∫–æ–µ –ê–î (–°–ê–î), –º–º —Ä—Ç. —Å—Ç.", min_value=70, max_value=220, value=120, step=1)
    X5 = st.number_input("X5: –î–∏–∞—Å—Ç–æ–ª–∏—á–µ—Å–∫–æ–µ –ê–î (–î–ê–î), –º–º —Ä—Ç. —Å—Ç.", min_value=40, max_value=140, value=80, step=1)

auto_x6 = st.checkbox("–û–ø—Ä–µ–¥–µ–ª—è—Ç—å X6 –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ (–î–ê–î > 100 ‚Üí X6 = 1)", value=True)
if auto_x6:
    X6_val = 1 if X5 > 100 else 0
else:
    X6_val = st.checkbox("X6: –î–ê–î > 100 –º–º —Ä—Ç. —Å—Ç.", value=False)

# –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –±—É–ª–µ–≤—ã—Ö –∫ 0/1
x1 = 1 if X1 else 0
x2 = 1 if X2 else 0
x3 = 1 if X3 else 0
x4 = float(X4)
x5 = float(X5)
x6 = int(X6_val)

# –†–∞—Å—á—ë—Ç
D = 1.61 * x1 + 1.05 * x2 - 1.62 * x3 - 0.11 * x4 + 0.09 * x5 + 3.13 * x6 + 3.73
risk_high = D >= -1.36
risk_text = "–í—ã—Å–æ–∫–∏–π —Ä–∏—Å–∫" if risk_high else "–ù–∏–∑–∫–∏–π —Ä–∏—Å–∫"

st.markdown("---")
st.subheader("–†–µ–∑—É–ª—å—Ç–∞—Ç")
colA, colB = st.columns([1, 2])
with colA:
    st.metric("–ó–Ω–∞—á–µ–Ω–∏–µ D", f"{D:.2f}")
with colB:
    if risk_high:
        st.error(f"**{risk_text}**  (–ø–æ—Ä–æ–≥ ‚àí1.36)")
    else:
        st.success(f"**{risk_text}**  (–ø–æ—Ä–æ–≥ ‚àí1.36)")

st.markdown("---")
st.caption(
    "‚ö†Ô∏è –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ: –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω –∏—Å–∫–ª—é—á–∏—Ç–µ–ª—å–Ω–æ –≤ —É—á–µ–±–Ω—ã—Ö/–∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Ü–µ–ª—è—Ö –∏ –Ω–µ —è–≤–ª—è–µ—Ç—Å—è –º–µ–¥–∏—Ü–∏–Ω—Å–∫–∏–º —Å–æ–≤–µ—Ç–æ–º. "
    "–î–ª—è –∫–ª–∏–Ω–∏—á–µ—Å–∫–∏—Ö —Ä–µ—à–µ–Ω–∏–π –Ω–µ–æ–±—Ö–æ–¥–∏–º–∞ –æ—Ü–µ–Ω–∫–∞ –≤—Ä–∞—á–∞ –∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ –ø—Ä–æ—Ç–æ–∫–æ–ª—ã."
)

# –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–æ–¥—Å–∫–∞–∑–∫–∏
with st.expander("üîé –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –≤–≤–æ–¥–∞ –∏ –ø–æ–≤—Ç–æ—Ä —Ä–∞—Å—á—ë—Ç–∞"):
    st.write(
        {
            "X1 (–≥–∏–ø–æ–¥–∏–Ω–∞–º–∏—è)": x1,
            "X2 (–•–ë–ü)": x2,
            "X3 (–•–ê–ì –≤ –ø—Ä–µ–¥—ã–¥—É—â—É—é –±–µ—Ä–µ–º–µ–Ω–Ω–æ—Å—Ç—å)": x3,
            "X4 (–°–ê–î)": x4,
            "X5 (–î–ê–î)": x5,
            "X6 (–î–ê–î>100)": x6
        }
    )
    st.info("–ò–∑–º–µ–Ω—è–π—Ç–µ –∑–Ω–∞—á–µ–Ω–∏—è ‚Äî —Ä–µ–∑—É–ª—å—Ç–∞—Ç –ø–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.")
